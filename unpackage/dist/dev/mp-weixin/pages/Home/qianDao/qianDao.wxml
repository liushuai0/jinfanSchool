<view class="content"><view class="page-body"><view class="sign-title"><view class="sign-title-l"><view class="portrait">{{$root.g0}}</view><view class="text"><view class="name">{{name}}</view><view data-event-opts="{{[['tap',[['goRule',['$event']]]]]}}" class="gz" bindtap="__e"><text class="t1">考勤组:公司考勤</text><text>查看规则</text></view></view></view><view class="sign-title-r"><navigator class="date" hover-class="none" url="ImportCalendar"><view class="uni-input">{{''+date+''}}<uni-icon vue-id="1" type="arrowdown" bind:__l="__l"></uni-icon></view></navigator></view></view><text data-event-opts="{{[['tap',[['reset',['$event']]]]]}}" bindtap="__e">重置</text><view style="text-align:center;padding:20rpx 0;">当前位置:<text data-event-opts="{{[['tap',[['openLocation',['$event']]]]]}}" bindtap="__e">{{address}}</text></view><view class="uni-timeline"><view class="uni-timeline-item uni-timeline-first-item"><view class="uni-timeline-item-divider" style="{{'background:'+(!isAm?'#1AAD19':'#bbb')+';'}}"></view><view class="uni-timeline-item-content"><view><view class="uni-timeline-item-content-t1">{{"上班时间"+Timer[0].time}}</view><block wx:if="{{isAm}}"><view class="desc-pad"><view class="time uni-timeline-item-content-t">{{'打卡时间 '+$root.g1+''}}<block wx:if="{{amSign.mode=='外勤打卡'}}"><view class="iswq">外勤打卡</view></block></view><view><uni-icon vue-id="2" type="location-filled" bind:__l="__l"></uni-icon>{{''+amSign.address+''}}</view><view data-event-opts="{{[['tap',[['showBz',['amSign']]]]]}}" class="bz last" bindtap="__e">备注<uni-icon style="{{'color:'+('rgb(0, 122, 255)')+';'}}" vue-id="3" type="forward" bind:__l="__l"></uni-icon></view></view></block><block wx:else><view class="content-show"><block wx:if="{{is===true}}"><view><view data-event-opts="{{[['tap',[['clickSign',['$event']]]]]}}" class="module CBlue" bindtap="__e"><view class="text">上班打卡</view><view class="time">{{time}}</view></view><block wx:if="{{is}}"><view class="colorGreen" style="text-align:center;">已在考勤范围内<text data-event-opts="{{[['tap',[['relocation',['$event']]]]]}}" class="relocation" bindtap="__e">重新定位</text></view></block></view></block><block wx:else><block wx:if="{{is===false}}"><view><view data-event-opts="{{[['tap',[['clickSign',['$event']]]]]}}" class="module CGreen" bindtap="__e"><view class="text">外勤打卡</view><view class="time">{{time}}</view></view><block wx:if="{{!is}}"><view class="colorRed" style="text-align:center;">不再考勤范围内<text data-event-opts="{{[['tap',[['relocation',['$event']]]]]}}" class="relocation" bindtap="__e">重新定位</text></view></block></view></block><block wx:else><block wx:if="{{is===null}}"><view><view class="module CAsh"><view class="text">请检查位置信息</view><view class="time">{{time}}</view></view></view></block></block></block></view></block></view></view></view><view class="uni-timeline-item uni-timeline-last-item"><view class="uni-timeline-item-divider" style="{{'background:'+(isAm?'#1AAD19':'#bbb')+';'}}"></view><view class="uni-timeline-item-content"><view><view class="uni-timeline-item-content-t1">{{"下班时间"+Timer[1].time}}</view><block wx:if="{{isAm}}"><view class="desc-pad"><block wx:if="{{isPm}}"><view class="desc-pad"><view class="time uni-timeline-item-content-t">{{'打卡时间:'+$root.g2+''}}<block wx:if="{{pmSign.mode=='外勤打卡'}}"><view class="iswq">外勤打卡</view></block></view><view><uni-icon vue-id="4" type="location-filled" bind:__l="__l"></uni-icon>{{''+pmSign.address+''}}</view><view data-event-opts="{{[['tap',[['showBz',['pmSign']]]]]}}" class="bz last" bindtap="__e">备注<uni-icon style="{{'color:'+('rgb(0, 122, 255)')+';'}}" vue-id="5" type="forward" bind:__l="__l"></uni-icon></view><image class="photoImg" src="{{imageSrc}}" mode="aspectFit"></image></view></block><block wx:else><view class="content-show"><block wx:if="{{is===true}}"><view><navigator class="module CBlue" url="./scan-frame/scan-frame"><view class="text">点击拍照</view><view class="time">{{time}}</view></navigator><block wx:if="{{is}}"><view class="colorGreen" style="text-align:center;">已在考勤范围内<text data-event-opts="{{[['tap',[['relocation',['$event']]]]]}}" class="relocation" bindtap="__e">重新定位</text></view></block></view></block><block wx:else><block wx:if="{{is===false}}"><view><view data-event-opts="{{[['tap',[['clickSign',['$event']]]]]}}" class="module CGreen" bindtap="__e"><view class="text">外勤打卡</view><view class="time">{{time}}</view></view><block wx:if="{{!is}}"><view class="colorRed" style="text-align:center;">不再考勤范围内<text data-event-opts="{{[['tap',[['relocation',['$event']]]]]}}" class="relocation" bindtap="__e">重新定位</text></view></block></view></block><block wx:else><block wx:if="{{is===null}}"><view><view class="module CGreen"><view class="text">请检查位置信息</view><view class="time">{{time}}</view></view></view></block></block></block></view></block></view></block></view></view></view></view><block wx:if="{{false}}"><view><uni-collapse vue-id="6" bind:__l="__l" vue-slots="{{['default']}}"><uni-collapse-item vue-id="{{('7')+','+('6')}}" title="全部打卡信息" bind:__l="__l" vue-slots="{{['default']}}"><uni-list vue-id="{{('8')+','+('7')}}" bind:__l="__l" vue-slots="{{['default']}}"><view class="uni-list-cell-left"><block wx:for="{{allSign}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view style="border-bottom:1px dashed #007AFF;"><view>{{item.mode}}</view><view>{{item.address}}</view><view>{{item.time}}</view></view></block></view></uni-list></uni-collapse-item></uni-collapse></view></block></view><uni-popup vue-id="9" show="{{type==='middle-list'}}" position="middle" mode="fixed" data-event-opts="{{[['^hidePopup',[['togglePopup',['']]]]]}}" bind:hidePopup="__e" bind:__l="__l" vue-slots="{{['default']}}"><view class="title" style="padding:20rpx 0;font-weight:bold;width:100%;text-align:center;border-bottom:1px solid #666;">打卡备注</view><view class="content" style="padding:20rpx 10rpx;width:100%;"><text class="text">打卡时间:</text><text>{{bzText.time}}</text><view class="text">打卡地点:</view><view>{{bzText.address}}</view></view><view class="content" style="padding:20rpx 10rpx;width:100%;"><view>{{bzText.remarks}}</view></view><view data-event-opts="{{[['tap',[['togglePopup',['']]]]]}}" class="bottom" style="padding:20rpx 10rpx;color:cadetblue;width:100%;text-align:center;border-top:1px solid #666;" bindtap="__e">关闭</view></uni-popup></view>