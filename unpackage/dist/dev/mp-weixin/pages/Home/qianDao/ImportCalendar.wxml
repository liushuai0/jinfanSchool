<view class="all"><view class="bar"><view data-event-opts="{{[['tap',[['handleCalendar',[0]]]]]}}" class="previous" bindtap="__e"><button>上一月</button></view><view class="date">{{(cur_year||"--")+" 年 "+(cur_month||"--")+" 月"}}</view><view data-event-opts="{{[['tap',[['handleCalendar',[1]]]]]}}" class="next" bindtap="__e"><button>下一月</button></view></view><block wx:if="{{langType=='ch'}}"><view class="week"><block wx:for="{{weeks_ch}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view>{{item}}</view></block></view></block><block wx:else><view class="week"><block wx:for="{{weeks_en}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view>{{item}}</view></block></view></block><view class="days"><block wx:for="{{days.length/7}}" wx:for-item="itemDayLen" wx:for-index="i" wx:key="i"><view class="columns"><block wx:for="{{days}}" wx:for-item="item" wx:for-index="j" wx:key="j"><view><block wx:if="{{j/7==i}}"><view class="rows"><block wx:for="{{7}}" wx:for-item="aweek" wx:for-index="k" wx:key="k"><view class="rows"><block wx:if="{{days[j+k]==undefined||days[j+k].date==null}}"><view class="cell"><text decode="{{true}}"></text></view></block><block wx:else><view class="cell"><block wx:if="{{days[j+k].isSign==true}}"><view class="bgWhite greenColor cell"><text>{{days[j+k].date}}</text></view></block><block wx:else><block wx:if="{{j+k<=today&&cur_month==toMonth||cur_month<toMonth}}"><view data-event-opts="{{[['tap',[['clickSignUp',[j,k,0]]]]]}}" class="cell redColor bgGray" bindtap="__e"><text>{{days[j+k].date}}</text></view></block><block wx:else><block wx:if="{{j+k-1==today&&cur_month==toMonth}}"><view data-event-opts="{{[['tap',[['clickSignUp',[j,k,1]]]]]}}" class="whiteColor cell bgBlue" bindtap="__e"><text>签到</text></view></block><block wx:else><view class="whiteColor"><text>{{days[j+k].date}}</text></view></block></block></block></view></block></view></block></view></block></view></block></view></block></view><view class="count"><text>截至目前，已坚持打卡</text><view class="daynumber"><text class="number">{{SumCount}}</text><text class="day">天</text></view><view>本月累积打卡<text class="monthSum">{{SignUp.length}}</text>天</view><text>请再接再厉，继续努力!</text></view></view>